{"version":3,"sources":["../src/zdkb.ts"],"names":[],"mappings":"","file":"zdkb.d.ts","sourcesContent":["require('dotenv').config()\n\n// import minimist from 'minimist'\nimport { v4 as uuidv4 } from 'uuid'\nimport { uploadObject } from './libs/aws'\nimport Zendesk from './libs/zendesk'\n\n// const argv = minimist(process.argv.slice(2))\n;(async function zdkb() {\n  try {\n    const backupInstancePrefix = `${Date.now()}__${uuidv4()}`\n    const fullPrefixBase = [\n      process.env.AWS_S3_PREFIX || 'zdkb',\n      backupInstancePrefix,\n    ]\n    const zendesk = Zendesk()\n    await zendesk.getArticles(async function processArticle(\n      article: any,\n      ind: number\n    ) {\n      const filePathInBucket = [\n        ...fullPrefixBase,\n        `${ind}__${article.title}.json`,\n      ]\n      await uploadObject(filePathInBucket.join('/'), JSON.stringify(article))\n    })\n\n    console.log(`Successfully saved your articles to`)\n    console.log(`s3://${process.env.AWS_S3_BUCKET}/${fullPrefixBase.join('/')}`)\n  } catch (err) {\n    console.error(`Error processing knowledge base`, err)\n  } finally {\n    process.exit()\n  }\n})()\n"]}